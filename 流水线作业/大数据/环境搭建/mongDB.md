# 一、SQL云数据库实验 

## 1. RDS操作

1.《10分钟快速入门RDS》 https://lab.huaweicloud.com/testdetail_2343  

### 1. 购买云数据库

  配置完基础RDS后，点击购买。

![image-20230406100247789](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406100247789.png)

## 2. 修改RDS数据库自动备份策略



![image-20230406102052020](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406102052020.png)



## 3. DAS连接实例

  在实例列表当中直接登录，输入用户命密码就可以连接上去。

![image-20230406102238258](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406102238258.png)

![image-20230406102333183](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406102333183.png)



## 3. 表操作

![image-20230406102815694](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406102815694.png)



## 4. 内网连接数据库

![image-20230406103558049](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406103558049.png)



## 5. 公网IP连接云数据库

![image-20230406104227501](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406104227501.png)

![image-20230406104706495](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406104706495.png)

2.《如何快速连接云数据库RDS MySQL》 https://developer.aliyun.com/adc/scenario/81575234dc0d4cdab8e43e49248bc1b2?spm=a2c6h.13858378.0.0.380b3083fPrqjS  

3.《MySQL数据库快速部署实践》 https://developer.aliyun.com/adc/scenario/2e99ebec78674c4a91a3a3c8ed582fa7?spm=a2c6h.13858378.0.0.11f3483f1TA5C6 

**实验要求：**

创建数据库名为RDS接自己姓名全拼，创建数据表名为table接自己姓名全拼,创建普通用户名为user接自己姓名全拼,截图带有上述信息的内容。

# 二、NoSQL云数据库实验 

## 1. MongDB

1.《 MongoDB数据库入门》 https://developer.aliyun.com/adc/scenario/dc25bd89c9d14bb3b096ccec0a0706b8?spm=a2c6h.13858375.devcloud-scene-list.18.4d1d4090NZ0fSH  

### 1. 基础配置操作

![image-20230406111223004](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406111223004.png)



![image-20230406111611150](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406111611150.png)



![image-20230406112935393](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406112935393.png)



  向集合当中插入文档

![image-20230406113435090](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406113435090.png)

![image-20230406113603817](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406113603817.png)



## 2. Redis在线

《基于Redis实现在线游戏积分排行榜》 https://developer.aliyun.com/adc/scenario/44d54481170f4914996d3ae53b818f32?spm=a2c6h.13858378.0.0.b2974cf3662lM5

- redis设置

![image-20230406115059679](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406115059679.png)

![image-20230406114747656](https://raw.githubusercontent.com/Janeonly300/codeImg/main/img/image-20230406114747656.png)



**实验要求：**

创建数据库名为mongodb接自己姓名全拼，创建集合名为collection接自己姓名全拼,创建普通用户名为user接自己姓名全拼,插入三条文档内容带有自己姓名信息，截图查询显示所有文档内容。

# 三、简要回答“课堂考核”内容

1.云数据库实例是什么？使用它要安装数据库系统吗？

答：云数据库实例是一种基于云计算架构的数据库服务，它是云厂商提供的一种完全托管的数据库解决方案。使用云数据库实例，用户可以通过简单的控制台操作或API调用来创建、配置、管理和使用数据库实例。在使用云数据库实例时，通常不需要再安装任何数据库系统，因为云厂商已经在后台完成了数据库系统的部署和管理。用户只需要选择所需的数据库类型和版本，根据自己的业务需求进行相关配置，就可以直接使用该数据库实例。云数据库实例通常会包括许多高级功能，如自动备份、数据恢复、可扩展性、安全性等，这些功能都由云厂商提供和管理，用户只需要关注自己的应用程序的数据库操作即可。总之，云数据库实例是一种快速、便捷、可靠的数据库解决方案，无需安装数据库系统，可以直接使用，并拥有许多高级功能和管理优势

 

2.云数据库存储容量是固定的，还是可大可小？

答：云数据库存储容量通常是可大可小的，这意味着用户可以根据自己的实际需求随时调整存储空间大小。云数据库提供商通常会提供多种存储规格和选项，以便用户根据自己的业务需求灵活选择。在云数据库中，用户可以通过控制台或API来动态增加或减少存储容量，而不需要停止数据库服务或执行复杂的迁移过程。例如，如果用户的数据量增加了，他们可以很容易地增加存储容量以满足需求；如果数据量减少了，他们也可以根据需要减少存储容量以优化成本。此外，一些云数据库提供商还提供了自动扩展功能，它可以帮助用户根据负载情况自动增加或减少存储容量，从而使数据库更具弹性和可伸缩性。综上所述，云数据库存储容量通常是可大可小的，用户可以随时根据自己的实际需求来调整存储空间大小，以获得更好的灵活性和效率。

 

3.ECS上自建数据库与云数据库实例有什么不同？

答：部署与管理：在ECS上自建数据库需要用户自己部署和管理数据库系统，包括数据库软件的安装、配置、维护和升级等工作，这需要一定的技术和时间成本。而云数据库实例是由云厂商提供和管理的，用户只需要通过控制台或API创建数据库实例并进行配置即可，许多繁琐的管理工作都由云厂商来完成。

可用性：ECS上自建数据库通常需要用户自己来配置高可用性方案，例如使用主从复制、镜像等技术来保证数据的可用性和容错性。而云数据库服务通常会提供高可用性解决方案，并自动处理故障转移、备份数据等操作，极大地提高了数据的可用性和容错性。

弹性扩容：在ECS上自建数据库中，如果需要扩展数据库存储空间或性能，需要进行手动调整并重新配置数据库系统，这可能需要停止数据库服务和执行复杂的迁移过程。而云数据库服务通常提供弹性扩容功能，可以根据负载情况自动调整存储容量和性能，并无需停机维护和人工干预。

成本：ECS上自建数据库需要用户自己购买和维护服务器资源，同时还需要支付数据库系统的软件费用。而云数据库服务通常采用按量计费模式，只需支付实际使用的存储空间、性能等资源，避免了不必要的成本浪费。

 

4.MongoDB是SQL还是NoSQL？为什么？

答：MongoDB属于NoSQL数据库，而不是传统的关系型数据库（SQL）。NoSQL指的是"非关系型数据库"，主要是为了解决传统关系型数据库在海量数据、高并发处理和分布式部署等方面的限制。与关系型数据库不同，NoSQL数据库通常采用非结构化或半结构化数据模型，并可通过横向扩展的方式实现高伸缩性和高性能。MongoDB是一种文档数据库，它使用JSON格式的BSON文件存储数据，并将数据组织成集合和文档的形式，而不是表格和行的形式。MongoDB使用灵活的数据模型和丰富的查询语言来支持各种类型的应用程序，包括web应用程序、大数据分析、物联网等。与关系型数据库不同，MongoDB没有预定义的模式或固定的集合结构。这意味着可以动态添加或删除字段和文档，同时也支持嵌套和多值字段等更复杂数据结构。此外，MongoDB还支持分片和副本集等分布式特性，以提供高可用性和性能。

 

5.实验中MongoDB是自己安装的吗？创建的数据库名和用户名分别是什么？用户是什么？为什么要用户密码？普通用户角色包含什么？

答：在实验中，MongoDB是在虚拟机中自己安装的。具体地说，我们使用了Ubuntu 16.04操作系统，并通过apt-get命令安装了MongoDB 3.2版本。创建的数据库名和用户名分别为testdb和testuser。用户是MongoDB中一种可以访问和管理特定数据库或集合的身份验证凭据，用于保护数据的安全性和完整性。

MongoDB的用户身份验证功能需要指定一个用户名和密码。这有助于防止未经授权的访问和恶意攻击，同时也可以对不同用户设置不同的权限，以确保数据的安全性。

普通用户角色包含以下权限：

read：允许读取指定数据库或集合中的文档数据。

readWrite：允许读取和写入指定数据库或集合中的文档数据。

dbAdmin：允许管理指定数据库，如备份、恢复、重命名等操作。

userAdmin：允许管理指定数据库中的用户和角色，如创建和删除用户、修改用户密码等操作。

dbOwner：该角色继承所有其他角色的权限，并允许执行更高级别的操作。

 

6.集合是什么？文档是什么？实验中对文档做了哪些操作？

答：在MongoDB中，集合是一组没有固定结构的文档。每个文档都可以有不同的字段和值，因此在同一集合中的文档可以包含完全不同的数据。集合类似于关系型数据库中的表格，但其结构更加灵活。

文档是MongoDB中存储数据的基本单元，主要用于表示实体或对象。文档是由键值对组成的，键是字符串，而值可以是各种类型的数据，例如字符串、数值、日期、数组等。文档类似于关系型数据库中的行，但它们更加灵活和动态。

在实验中，我们可以对文档执行各种操作，例如：

插入文档：使用insertOne()或insertMany()函数将文档插入到集合中。

查询文档：使用find()函数查询集合中的文档，并可以进行排序、筛选和限制等操作。

更新文档：使用updateOne()或updateMany()函数更新集合中的文档，可以修改或替换文档中的字段或值。

删除文档：使用deleteOne()或deleteMany()函数删除集合中的文档。

 

7.Redis是SQL还是NoSQL？为什么？

答：Redis是NoSQL数据库，而不是关系型数据库(SQL)。

NoSQL指的是"非关系型数据库"，主要是为了解决传统关系型数据库在海量数据、高并发处理和分布式部署等方面的限制。与传统关系型数据库不同，NoSQL数据库通常采用非结构化或半结构化数据模型，并可通过横向扩展的方式实现高伸缩性和高性能。Redis是一种基于内存的键值对存储系统，同时也支持硬盘存储。它使用简单的数据类型（字符串、哈希表、列表、集合、有序集合）来存储数据，这些数据类型可以灵活地组合使用，以满足各种应用程序的需求。与传统关系型数据库不同，Redis没有预定义的模式或固定的表结构。这意味着可以动态添加或删除字段和数据，同时还支持更复杂的数据结构，如集合、列表、sorted sets等。此外，Redis还提供了许多高级特性，如发布/订阅、事务、Lua脚本等，以及复制和分片等分布式特性，以提供高可用性和性能。

 

8.实验中Redis数据结构是哪一种？

答：在实验中，Redis使用了五种不同的数据结构，分别是：

String（字符串）：单个键值对，支持整数、浮点数和字符串等多种数据类型。

Hash（哈希表）：由多个字段组成的键值对集合，适用于存储对象或实体。

List（列表）：由多个元素组成的可重复有序集合，适用于队列、栈等场景。

Set（集合）：由多个唯一元素组成的无序集合，适用于去重、交并差等操作。

Sorted Set（有序集合）：由多个唯一元素和分值组成的有序集合，适用于排行榜、范围查询等场景。

 

四、习题

5.8 习题

1.如何准确理解NoSQL的含义？

答：NoSQL是一种不同于关系数据库的数据库管理系统设计方式，是对非关系型数据库的一类统称，它采用的数据模型并非传统关系数据库的关系模型，而是类似键/值、列族、文档等非关系模型

 

2.试述关系数据库在哪些方面无法满族Web2.0应用的需求。

答：关系数据库已经无法满足Web2.0的需求。主要表现在以下几个方面：

（1）无法满足海量数据的管理需求

（2）无法满足数据高并发的需求

（3）无法满足高可扩展性和高可用性的需求

 

3.请比较NoSQL数据库和关系数据库的优缺点。

答：NoSQL数据库的优点：

1.可以很容易通过添加更多设备来支持更大规模的数据，NoSQL在设计之初就充分考虑了横向扩展的需求，可以很容易通过添加廉价设备实现扩展，可以和云计算紧密结合

2.不存在数据库模式，可以自由灵活定义并存储各种不同类型的数据

3.在NoSQL数据库却无法实现数据完整性

4.大多数NoSQL都能提供较高的可用性

NoSQL数据库的缺点：

1.没有关系代数理论作为基础

2.很多NoSQL数据库没有面向复杂查询的索引，虽然NoSQL可以使用MapReduce来加速查询，但是，在复杂查询方面的性能仍然不如RDBMS

3.很多NoSQL数据库放松了对事务ACID四性的要求，而是遵守BASE模型，只能保证最终一致性

4.NoSQL还没有行业标准，不同的NoSQL数据库都有自己的查询语言，很难规范应用程序接口

 

5.NoSQL在技术支持方面仍然处于起步阶段，还不成熟，缺乏有力的技术支持

6.NoSQL数据库虽然没有DBMS复杂，也难以维护

 

RDBMS关系数据库的优点：

1.有关系代数理论作为基础

2.借助于索引机制可以实现快速查询（包括记录查询和范围查询）

3.任何一个RDBMS都可以很容易实现数据完整性，比如通过主键或者非空约束来实现实体完整性，通过主键、外键来实现参照完整性，通过约束或者触发器来实现用户自定义完整性

4.RDBMS已经标准化（SQL）

5.RDBMS经过几十年的发展，已经非常成熟，Oracle等大型厂商都可以提供很好的技术支持

RDBMS关系数据库的缺点：

1.很难实现横向扩展，纵向扩展的空间也比较有限，性能会随着数据规模的增大而降低

2.需要定义数据库模式，严格遵守数据定义和相关约束条件

3.RDBMS严格遵守事务ACID模型，可以保证事务强一致性

4.RDBMS在任何时候都以保证数据一致性为优先目标，其次才是优化系统性能，随着数据规模的增大，RDBMS为了保证严格的一致性，只能提供相对较弱的可用性

5.RDBMS需要专门的数据库管理员(DBA)维护

 

\5. 试述NoSQL数据库的四大类型

答：键值数据库、列族数据库、文档数据库和图数据库

 

6.试述键值数据库、列族数据库、文档数据库和图数据库的适用场合和优缺点。

答：1.键值数据库：

优点：扩展性好，灵活性好，大量写操作时性能高

缺点：无法存储结构化信息，条件查询效率较低

2.列族数据库：

优点：查找速度快，可扩展性强，容易进行分布式扩展，复杂性低

缺点：功能较少，大都不支持强事务一致性

3.文档数据库：

优点：性能好（高并发），灵活性高，复杂性低，数据结构灵活

提供嵌入式文档功能，将经常查询的数据存储在同一个文档中

既可以根据键来构建索引，也可以根据内容构建索引

缺点：缺乏统一的查询语法

4.图形数据库：

优点：灵活性高，支持复杂的图形算法，可用于构建复杂的关系图谱

缺点：复杂性高，只能支持一定的数据规模

 

7.试述CAP理论的具体含义。

答：所谓的CAP指的是：

C（Consistency）：一致性，是指任何一个读操作总是能够读到之前完成的写操作的结果，也就是在分布式环境中，多点的数据是一致的，或者说，所有节点在同一时间具有相同的数据

A:（Availability）：可用性，是指快速获取数据，可以在确定的时间内返回操作结果，保证每个请求不管成功或者失败都有响应；

P（Tolerance of Network Partition）：分区容忍性，是指当出现网络分区的情况时（即系统中的一部分节点无法和其他节点进行通信），分离的系统也能够正常运行，也就是说，系统中任意信息的丢失或失败不会影响系统的继续运作。

 

8.请举例说明不同产品在设计时是如何运用CAP理论的。

答：CAP理论是指在一个分布式系统中，一致性（Consistency）、可用性（Availability）和分区容错性（Partition tolerance）三个特性不能同时被满足。在设计不同产品时，可以针对CAP理论的不同特点进行权衡与平衡。例如，在设计数据库系统时，需要考虑数据的一致性和可用性，而分区容错性可能并不是最重要的因素。因此，一些数据库系统倾向于牺牲分区容错性以换取更强的一致性和可用性，例如ACID事务模型的关系型数据库系统。而在设计分布式文件系统时，则需要考虑到分区容错性的重要性，因为这种系统需要处理大量的数据和请求，没有完美的网络连接可能会导致数据不一致或不可用。因此，分布式文件系统通常倾向于放弃一致性来保证可用性和分区容错性，例如GFS、HDFS等系统。另一个例子是在设计云计算服务时，需要考虑到不同的客户可能会面临不同的需求和不同的网络环境，所以需要平衡一致性和可用性的权衡来实现最好的用户体验。同时，还需要考虑到分区容错性，以确保数据和服务的高可靠性和可伸缩性。因此，云计算服务通常会使用基于CAP理论的一些复杂算法来实现这种权衡和平衡，例如Amazon Dynamo系统。

 

\9.  试述数据库的ACID四性的含义

答：

1.原子性（Atomicity)

指事务必须是原子工作单元，对于其数据修改，要么全都执行，要么全都不执行。

2.一致性（consistency）

指事务在完成时，必须使所有的数据都保持一致状态。

3.隔离性（Isolation)

指并发事务所做的修改必须与其他并发事务所做的修改隔离。

4.持久性（Durability)

指事务完成之后，它对于系统的影响是永久性的，该修改即使出现致命的系统故障也将一直保持。

 

10.试述BASE的具体含义

答：BASE的基本含义是基本可用（Basically Availble）、软状态（Soft-state）和最终一致性（Eventual consistency）

 

11.请解释软状态、无状态、硬状态的具体含义。

答：软状态（soft-state）”是与“硬状态（hard-state）”相对应的一种提法。数据库保存的数据是“硬状态”时，可以保证数据一致性，即保证数据一直是正确的。“软状态”是指状态可以有一段时间不同步，具有一定的滞后性。

 

12.什么是最终一致性？

答：最终一致性根据更新数据后各进程访问到数据的时间和方式的不同，又可以区分为：

会话一致性：它把访问存储系统的进程放到会话（session）的上下文中，只要会话还存在，系统就保证“读己之所写”一致性。如果由于某些失败情形令会话终止，就要建立新的会话，而且系统保证不会延续到新的会话；

单调写一致性：系统保证来自同一个进程的写操作顺序执行。系统必须保证这种程度的一致性，否则就非常难以编程了

单调读一致性：如果进程已经看到过数据对象的某个值，那么任何后续访问都不会返回在那个值之前的值

因果一致性：如果进程A通知进程B它已更新了一个数据项，那么进程B的后续访问将获得A写入的最新值。而与进程A无因果关系的进程C的访问，仍然遵守一般的最终一致性规则

读己之所写”一致性：可以视为因果一致性的一个特例。当进程A自己执行一个更新操作之后，它自己总是可以访问到更新过的值，绝不会看到旧值

 

13.试述不一致性窗口的含义。

答：所有后续的访问都可以读取到操作OP写入的最新值。从OP操作完成到后续访问可以最终读取到OP写入的最新值，这之间的时间间隔称为“不一致性窗口”。

 

14.最终一致性根据更新数据后各进程访问到数据的时间和方式的不同，又可以分为哪些不同类型的一致性？

答：话一致性、单调写一致性、单调写一致性、因果一致性和“读己之所写”一致性。

 

15.什么是NewSQL数据库？

答：NewSQL是对各种新的可扩展、高性能数据库的简称，这类数据库不仅具有NoSQL对海量数据的存储管理能力，还保持了传统数据库支持ACID和SQL特性。

 

16.试述NewSQL数据库与传统的关系数据库以及 NoSQL 数据库的区别。

答：NewSQL 数据库是介于传统关系型数据库和 NoSQL 数据库之间的一类新型数据库。它们试图在保持关系型数据库的事务处理能力和数据一致性的同时，以水平扩展为目标提高性能。与传统关系型数据库相比，NewSQL 数据库通常具有以下特点：

分布式架构：NewSQL 数据库采用分布式架构，使其可以进行水平扩展，提高数据库的性能和可用性。新型存储引擎：NewSQL 数据库通常使用新型的存储引擎，如内存数据库或者基于 SSD 的存储引擎，以提高读写性能和响应速度。针对大规模数据处理的优化：NewSQL 数据库在设计时考虑了处理大规模数据的需求，因此通常会针对这方面进行优化。与 NoSQL 数据库相比，NewSQL 数据库保留了关系型数据库的 ACID 属性，即原子性、一致性、隔离性和持久性，保证了数据的准确性和一致性。同时也具备了 NoSQL 数据库的高可扩展性和灵活性。但 NewSQL 数据库相比 NoSQL 数据库的不足在于，在某些极端情况下，NewSQL 数据库无法像 NoSQL 数据库那样水平扩展到非常大的规模。NewSQL 数据库是介于传统关系型数据库和 NoSQL 数据库之间的一类新型数据库。它们试图在保持关系型数据库的事务处理能力和数据一致性的同时，以水平扩展为目标提高性能。与传统关系型数据库相比，NewSQL 数据库通常具有以下特点：分布式架构：NewSQL 数据库采用分布式架构，使其可以进行水平扩展，提高数据库的性能和可用性。新型存储引擎：NewSQL 数据库通常使用新型的存储引擎，如内存数据库或者基于 SSD 的存储引擎，以提高读写性能和响应速度。针对大规模数据处理的优化：NewSQL 数据库在设计时考虑了处理大规模数据的需求，因此通常会针对这方面进行优化。与 NoSQL 数据库相比，NewSQL 数据库保留了关系型数据库的 ACID 属性，即原子性、一致性、隔离性和持久性，保证了数据的准确性和一致性。同时也具备了 NoSQL 数据库的高可扩展性和灵活性。但 NewSQL 数据库相比 NoSQL 数据库的不足在于，在某些极端情况下，NewSQL 数据库无法像 NoSQL 数据库那样水平扩展到非常大的规模。

 

6.5 习题

1.试述云数据库的概念。

答：云数据库是一种在云计算环境下提供数据存储和管理服务的技术。它是将传统的数据库技术与云计算相结合，通过互联网提供可扩展、高可用、安全、灵活和经济的数据存储解决方案。

 

\2.  与传统的软件使用方式相比，云计算方式具有哪些明显的优势?

答：云计算具有如下优势：
 （1）传统计算需要购买设备，构建技术架构；而云计算机技术购买服务，包括体系架构。
 （2）传统计算需要支付设备费用，以及行政开销；而云计算按需使用收费，减少行政开销。
 （3）传统计算主要使用Internet网络和桌面电脑进行访问；而云计算可在Internet网络上用任何设备进行访问。
 （4）传统计算是静态的，单个租赁的，非共享技术模式；而云计算式动态的，多个租赁的，可伸缩和弹性的技术模式
 （5）传统计算部署费钱费时，且需要场地和人员；而云计算降低部署时间，快速收回投资成本。

 

3.云数据库有哪些特性?

答：云数据库的特性有：实例创建快速、支持只读实例、读写分离、故障自动切换、[数据备份](https://baike.baidu.com/item/数据备份/10510214?fromModule=lemma_inlink)、Binlog备份、SQL审计、访问[白名单](https://baike.baidu.com/item/白名单/3029364?fromModule=lemma_inlink)、监控与[消息通知](https://baike.baidu.com/item/消息通知/5235887?fromModule=lemma_inlink)等。

 

4.试述云数据库的影响。

答: 在大数据时代,每个企业几乎每天都在不断产生大量的数据。企业类型不同,对于存

储的需求也千差万别,而云数据库可以很好地满足不同企业的个性化存储需求。

首先,云数据库可以满足大企业的海量数据存储需求。 云数据库在当前数据爆炸的大数

据时代具有广阔的应用前景。 传统的关系数据库难以水平扩展, 相本无法存储如此海量的数据。因此,具有高可扩展性的云数据库就成为企业海量数据存储管理的很好选择。

其次,云数据库可以满足中小企业的低成本数据存储需求。中小企业在 IT 基础设施

方面的投人比较有限,非常渴望从第三方方便、快捷、廉价地获得数据库服务。云数据库采用多租户方式同时为多个用户提供服务, 降低了单个用户的使用成本, 而且用户使用云数据库服务通常按需付费,不会浪费资源造成额外支出,因此,云数据库使用成本很低,对于中小企业而言可以大大降低企业的信息化门槛, 让企业在付出较低成本的同时, 获得优质的专业级数据库服务 , 从而有效提升企业信息化水平。

 

5.举例说明云数据库厂商及其代表性产品。

答：云数据库供应商主要分为三类。

(1)传统的数据库厂商,如Teradata、Oracle、IBM DB2和Microsoft SQL Server等。

(2)涉足数据库市场的云供应商,如Amazon、Google.Yahoo!、阿里、百度、腾讯等。

(3)新兴厂商,如IVertica.LongJump 和EnterpriseDB等。

 

6.试述Microsoft SQL Azure的体系架构。

答：SQL Azure服务由4个层次组成：基础设施层、平台层、服务层和客户端层。除了客户端以外，其他3层都运行在微软的数据中心。

（1）基础设施层

　　基础设施层为上层的应用提供了硬件和操作系统的管理接口。它跨越了数据中心的许多服务。

（2）平台层

平台层由SQL Server服务器实例、SQL Azure fabric控制器和其他管理服务组成。SQL Server数据库实例代表了客户部署的数据和数据备份，以及底层的操作系统实例。SQL Azure fabric用于完成数据库的自动部署、备份、故障转移和设置负载均衡。SQL Azure fabric负责为用户的数据创建3个备份，并且基于这些备份提供自动的故障转移能力。

如果用户的主数据库实例出现故障，SQL Azure fabric将会从可用的3个备份中选择一个作为新的主数据库实例，并将所有通信信息发往新的主数据库。之后，SQL Azure fabric会创建新的备份数据库实例，以维持3次备份的原则。管理服务负责系统的补丁、升级、一致性，并且负责对底层硬件系统进行配置。

（3）服务层

服务层直接接入外网的设备组中，作为平台层接入外部网络的网关。它向最终用户提供TDS(Tabular DATA Stream)协议的访问端口，用户通过该协议访问SQL Azure内部的数据。这和过去SQL Azure的操作是一样的。服务层同时还提供了流量计费及用户账户的配置服务。

服务层暴露了TDS协议的接口，使用了基于SSL的1433端口。服务层负责将客户的TDS连接路由到平台层的用户数据库实例上。服务层保留了主数据库及其备份数据库的信息。在用户创建数据库时，服务层还负责为用户初始化一个新的数据库。在初始化数据库阶段，服务层也会与SQL Azure fabric协作完成对备份数据库的初始化工作。

流量与计费服务负责监控用户数据库的使用情况，并根据使用情况进行计费。计费是在一个账户级别下完成的。

（4）客户端层

客户端层并没有包含SQL Azure的特定组件，相反用户可以使用现在的SQL Server客户端组件访问SQL Azure，比如ADO[.NET](https://xiazai.zol.com.cn/heji/9250/)、ODBC、[Visual](https://xiazai.zol.com.cn/detail/43/428468.shtml) Studio、SQL Server Management Studio、ADO.NET Data Server数据服务等。客户端API通过1433端口初始化一个TDS连接到SQL Azure，服务层将该连接路由到正确的数据库实例。

 

 

7.试述UMP系统的功能。

答:UMP系统是构建在一个大的集群之上的,通过多个组件的协同作业,整个系统实现了对用户透明的容灾、读写分离、分库分表、资源管理、资源调度、资源隔离和数据安全功能。

 

8.试述UMP系统的组件及其具体作用。

答：ump系统的组件及其具体作用分别是：

（1）Mnesia：Mnesia是一个分布式数据库管理系统，适合于电信及其他需要持续运行和具备软实时特性的Erlang应用，是构建电信应用的控制系统平台——开放式电信平台（Open Telecom Platform，OTP）的一部分。

（2）RabbitMQ：RabbitMQ是一个用Erlang开发的工业级的消息队列产品（功能类似于IBM公司的消息队列产品IBM WEBSPHERE MQ），作为消息传输中间件来使用，可以实现可靠的消息传送。

（3）Zookeeper：Zookeeper是高效和可靠的协同工作系统，提供分布式锁之类的基本服务如统一命名服务、状态同步服务、集群管理、分布式应用配置项的管理等。

用于构建分布式应用，减轻分布式应用程序所承担的协调任务。在UMP系统中，Zookeeper主要发挥3个作用。

 

9.试述UMP系统实现主从备份的方法。

答：UMP系统会为用户创建两个MySQL实例，一个是主库，一个是从库，且

这两个MySQL实例之间相互把对方设置为备份机，任何一个MySQL实例上面

发生的更新都会复制到对方。一旦 主机宕机，Controller服务器会启动主从切换，

修改映射关系;宕机后的主库在恢复处理后会再次上线，并从从库中复制更新，

 

 

10.试述UMP系统读写分离的实现方法。

答：UMP系统实现了对于用户透明的读写分离功能，当整个功能被开启时，负

责向用户提供访问MySQL数据库服务的Proxy 服务器，就会对用户发起的

SQL语句进行解析，如果属于写操作,就直接发送到主库，如果是读操作，就会

被均衡地发送到主库和从库.上执行。

 

11.UMP系统采用哪两种方式实现资源隔离?

答：①用Group限制MySQL进程资源;

②在Proxy服务器端限制QPS。

 

12.试述UMP系统中的3种规模用户

答：系统内部划分为3种规格的用户，分别是数据量和流量比较小的用户、中等

规模用户以及需要分库分表的用户。多个小规模用户可以共享同一个MySQL实

例，中等规模用户独占-个MySQL实例，需要分库分表的用户的多个MySQL

实例共享同一个物理机，通过这些方式实现了资源的虚拟化，降低了整体成本。

UMP通过“用Cgroup限制MySQL进程。

 

13.UMP系统如何保障数据安全?

答：①SSL数据库连接。SSL ( Secure Sockets Layer )是为网络通信提供安全

及数据完整性的一种安全协议，它在传输层对网络连接进行加密。Proxy 服务器

实现了完整的MySQL客户端/服务器协议，可以与客户端之间建立SSL数据库

连接。

②数据访问IP白名单。可以把允许访问云数据库的IP地址放入“白名单”，

只有白名单内的IP地址才能访问，其他IP地址的访问都会被拒绝，从而进一步

保证账户安全。

③记录用户操作日志。用户的所有操作记录都会被记录到日志分析服务器,

通过检查用户操作记录，可以发现隐藏的安全漏洞。

④SQL拦截。Proxy服务器可以根据要求拦截多种类型的SQL语句，比如

全表扫描语句“select

 